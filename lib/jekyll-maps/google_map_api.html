<script type='text/javascript'>
  var jekyllMaps = (function () {
    'use strict';

    return {
      initialize: function () {
        this.options = {
          center: new google.maps.LatLng(0, 0),
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          zoom: 3
        }
      },
      create: function (id, locations) {
        var bounds = new google.maps.LatLngBounds(),
            map = new google.maps.Map(document.getElementById(id), this.options),
            markers = locations.map(function (location) {
              var position = new google.maps.LatLng(
                  location.latitude, location.longitude
                  ),
                  marker = new google.maps.Marker({
                    position: position,
                    title: location.title,
                    url: location.url,
                    map: map
                  });

              bounds.extend(position);
              marker.addListener('click', function () {
                window.location.href = this.url
              });

              return marker;
            });

        map.fitBounds(bounds);
        new MarkerClusterer(map, markers, {
          gridSize: 25,
          imagePath: 'https://raw.githubusercontent.com/googlemaps/js-marker-clusterer/gh-pages/images/m'
        });
      }
    };
  }());
</script>
<script src='https://googlemaps.github.io/js-marker-clusterer/src/markerclusterer.js'></script>
<script src='https://maps.googleapis.com/maps/api/js?callback=jekyllMaps.initialize'></script>
